<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AudioKniga Downloader</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="header">
      <div class="logo">üéß AudioKniga Downloader</div>
    </div>

    <!-- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-status" id="authStatus">
      <div class="auth-indicator" id="authIndicator"></div>
      <span id="authText">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...</span>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç: –Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞—É–¥–∏–æ–∫–Ω–∏–≥–∏ -->
    <div class="not-audiobook" id="notAudiobook" style="display: none;">
      <div class="icon">üìö</div>
      <p>–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞—É–¥–∏–æ–∫–Ω–∏–≥–∏ –Ω–∞ audiokniga.one</p>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç: –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω -->
<div class="not-authorized" id="notAuthorized" style="display: none;">
  <div class="icon">‚ö†Ô∏è</div>
  <p><strong>–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</strong></p>
  <p class="small">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ audiokniga.one –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞</p>
  <button class="btn btn-primary" id="loginBtn">–í–æ–π—Ç–∏</button>
  <button class="btn btn-secondary" id="openSiteBtn" style="margin-top: 10px;">–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç</button>
</div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—É–¥–∏–æ–∫–Ω–∏–≥–µ -->
    <div class="audiobook-info" id="audiobookInfo" style="display: none;">
      <!-- –û–±–ª–æ–∂–∫–∞ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="book-header">
        <img id="bookCover" class="book-cover" src="" alt="–û–±–ª–æ–∂–∫–∞">
        <div class="book-details">
          <h2 id="bookTitle">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
          <div class="book-meta">
            <div class="meta-item">
              <span class="icon">‚úçÔ∏è</span>
              <span id="bookAuthor">‚Äî</span>
            </div>
            <div class="meta-item">
              <span class="icon">üéôÔ∏è</span>
              <span id="bookReader">‚Äî</span>
            </div>
            <div class="meta-item">
              <span class="icon">‚è±Ô∏è</span>
              <span id="bookDuration">‚Äî</span>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
      <div class="actions">
        <button class="btn btn-primary btn-full" id="downloadAllBtn">
          <span class="icon">üì•</span>
          <span>–°–∫–∞—á–∞—Ç—å –≤—Å—é –∫–Ω–∏–≥—É (<span id="chaptersCount">0</span> –≥–ª–∞–≤)</span>
        </button>
        
        <div class="actions-row">
          <button class="btn btn-secondary btn-chapters" id="toggleChaptersBtn">
            <span class="icon">üìã</span>
            <span>–°–ø–∏—Å–æ–∫ –≥–ª–∞–≤</span>
          </button>
          <div class="chapters-info">
            <span id="chaptersTotal">0 –≥–ª–∞–≤</span>
          </div>
        </div>
      </div>

      <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
      <div class="download-progress" id="downloadProgress" style="display: none;">
        <div class="progress-header">
          <span>–°–∫–∞—á–∏–≤–∞–Ω–∏–µ...</span>
          <span id="progressText">0 / 0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-info">
          <span id="progressStatus">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</span>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –≥–ª–∞–≤ -->
      <div class="chapters-section" id="chaptersSection" style="display: none;">
        <div class="chapters-controls">
          <input type="text" id="chaptersSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –≥–ª–∞–≤–∞–º...">
          <button class="btn-close" id="closeChaptersBtn" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
        </div>
        
        <div class="chapters-list" id="chaptersList">
          <!-- –ì–ª–∞–≤—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –æ—à–∏–±–∫–æ–π -->
    <div class="modal" id="errorModal" style="display: none;">
      <div class="modal-overlay" id="modalOverlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <span class="modal-icon">‚ö†Ô∏è</span>
          <h3>–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</h3>
        </div>
        <div class="modal-body" id="errorMessage">
          –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="closeErrorBtn">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>